(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[378],{5267:(e,t,s)=>{Promise.resolve().then(s.bind(s,30242))},30242:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var a=s(36362),l=s(39938),i=s(11249),n=s(35865),c=s(60833),r=s(3442),d=s(94040),o=s(57480),x=s(5128),m=s(93873),h=s(23809),p=s(870),u=s(24659),b=s(81499),g=s(75013),j=s(45514),v=s(43445),N=s(92275),f=s(69981);function w(){let{data:e,status:t}=(0,i.useSession)(),s=(0,n.useRouter)(),[d,o]=(0,l.useState)([]),[x,m]=(0,l.useState)(null),[h,p]=(0,l.useState)(!0),[w,k]=(0,l.useState)("active");(0,l.useEffect)(()=>{"unauthenticated"===t?s.push("/"):"authenticated"===t&&e&&((0,c.O5)(e.accessToken),T())},[t,e,s]);let T=async()=>{try{let e=await c.Ay.get("/battles").catch(()=>({data:[]}));o(e.data||[{id:"1",system:"M-OEE8",region:"Delve",status:"active",startTime:new Date(Date.now()-36e5).toISOString(),participants:234,kills:45,iskDestroyed:25e9,topAlliances:["Goonswarm Federation","Test Alliance","Pandemic Legion"]},{id:"2",system:"1DQ1-A",region:"Delve",status:"active",startTime:new Date(Date.now()-72e5).toISOString(),participants:156,kills:23,iskDestroyed:12e9,topAlliances:["Goonswarm Federation","Brave Collective"]},{id:"3",system:"T5ZI-S",region:"Delve",status:"ended",startTime:new Date(Date.now()-144e5).toISOString(),endTime:new Date(Date.now()-36e5).toISOString(),participants:89,kills:67,iskDestroyed:45e9,topAlliances:["Test Alliance","Pandemic Legion"]}])}catch(e){console.error("Failed to fetch battles:",e)}finally{p(!1)}},A=async e=>{try{let t=await c.Ay.get("/battles/".concat(e)).catch(()=>({data:{...d.find(t=>t.id===e),timeline:[{time:"00:00",kills:5},{time:"00:15",kills:12},{time:"00:30",kills:18},{time:"00:45",kills:25},{time:"01:00",kills:30}],topShips:[{shipType:"Interceptor",count:45},{shipType:"Cruiser",count:38},{shipType:"Battleship",count:25},{shipType:"Frigate",count:20}]}}));m(t.data)}catch(e){console.error("Failed to fetch battle details:",e)}},D=d.filter(e=>"all"===w||e.status===w);return h?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"text-slate-400",children:"Loading battles..."})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Battle Monitor"}),(0,a.jsx)("p",{className:"text-slate-400",children:"Track active and historical battles in New Eden"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>k("active"),className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("active"===w?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"),children:"Active Battles"}),(0,a.jsx)("button",{onClick:()=>k("ended"),className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("ended"===w?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"),children:"Ended Battles"}),(0,a.jsx)("button",{onClick:()=>k("all"),className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("all"===w?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"),children:"All"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[D.map(e=>(0,a.jsx)(y,{battle:e,selected:(null==x?void 0:x.id)===e.id,onClick:()=>A(e.id)},e.id)),0===D.length&&(0,a.jsxs)("div",{className:"bg-slate-800 rounded-lg p-8 border border-slate-700 text-center text-slate-400",children:["No ","all"!==w?w:""," battles found"]})]}),x&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Battle Timeline"}),(0,a.jsx)(u.u,{width:"100%",height:200,children:(0,a.jsxs)(b.E,{data:x.timeline,children:[(0,a.jsx)(g.d,{strokeDasharray:"3 3",stroke:"#475569"}),(0,a.jsx)(j.W,{dataKey:"time",stroke:"#94a3b8"}),(0,a.jsx)(v.h,{stroke:"#94a3b8"}),(0,a.jsx)(N.m,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #475569",borderRadius:"8px"}}),(0,a.jsx)(f.y,{dataKey:"kills",fill:"#3b82f6"})]})})]}),(0,a.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(r.A,{className:"w-5 h-5 text-blue-400"}),"Top Ship Types"]}),(0,a.jsx)("div",{className:"space-y-3",children:x.topShips.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-slate-300",children:e.shipType}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-32 bg-slate-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"".concat(e.count/x.topShips[0].count*100,"%")}})}),(0,a.jsx)("span",{className:"text-white font-medium w-8 text-right",children:e.count})]})]},e.shipType))})]})]})]})]})}function y(e){var t;let{battle:s,selected:l,onClick:i}=e,n=s.endTime?Math.floor((new Date(s.endTime).getTime()-new Date(s.startTime).getTime())/6e4):Math.floor((Date.now()-new Date(s.startTime).getTime())/6e4);return(0,a.jsxs)("div",{onClick:i,className:"bg-slate-800 rounded-lg p-5 border cursor-pointer transition-all ".concat(l?"border-blue-500 shadow-lg shadow-blue-500/20":"border-slate-700 hover:border-slate-600"),children:[(0,a.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(d.A,{className:"w-5 h-5 text-blue-400"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-white",children:s.system}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("active"===s.status?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"),children:s.status})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-slate-400 text-sm",children:[(0,a.jsx)(o.A,{className:"w-4 h-4"}),s.region]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 text-slate-400 text-xs mb-1",children:[(0,a.jsx)(x.A,{className:"w-3 h-3"}),"Participants"]}),(0,a.jsx)("div",{className:"text-white font-semibold",children:s.participants})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 text-slate-400 text-xs mb-1",children:[(0,a.jsx)(m.A,{className:"w-3 h-3"}),"Kills"]}),(0,a.jsx)("div",{className:"text-white font-semibold",children:s.kills})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 text-slate-400 text-xs mb-1",children:[(0,a.jsx)(h.A,{className:"w-3 h-3"}),"Destroyed"]}),(0,a.jsx)("div",{className:"text-white font-semibold",children:(t=s.iskDestroyed)>=1e9?"".concat((t/1e9).toFixed(1),"B ISK"):t>=1e6?"".concat((t/1e6).toFixed(1),"M ISK"):"".concat(t.toLocaleString()," ISK")})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-slate-400 text-sm mb-3",children:[(0,a.jsx)(p.A,{className:"w-4 h-4"}),"Duration: ",n," minutes"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-slate-400 text-xs mb-2",children:"Top Alliances:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:s.topAlliances.slice(0,3).map(e=>(0,a.jsx)("span",{className:"px-2 py-1 bg-slate-700 rounded text-xs text-slate-300",children:e},e))})]})]})}},60833:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>i,O5:()=>l});let a=s(53396).A.create({baseURL:"http://localhost:30006",headers:{"Content-Type":"application/json"}}),l=e=>{e?a.defaults.headers.common.Authorization="Bearer ".concat(e):delete a.defaults.headers.common.Authorization},i=a}},e=>{e.O(0,[249,139,562,991,678,358],()=>e(e.s=5267)),_N_E=e.O()}]);