(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[267],{870:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(98868).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},34250:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(98868).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},50977:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(98868).A)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},55620:(e,t,s)=>{Promise.resolve().then(s.bind(s,80009))},60833:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>r,O5:()=>l});let a=s(53396).A.create({baseURL:"http://localhost:30006",headers:{"Content-Type":"application/json"}}),l=e=>{e?a.defaults.headers.common.Authorization="Bearer ".concat(e):delete a.defaults.headers.common.Authorization},r=a},80009:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var a=s(36362),l=s(39938),r=s(11249),n=s(35865),i=s(60833),o=s(98868);let c=(0,o.A)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);var d=s(50977),h=s(34250),x=s(870);let m=(0,o.A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),u=(0,o.A)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),p=(0,o.A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);function g(){let{data:e,status:t}=(0,r.useSession)(),s=(0,n.useRouter)(),[o,h]=(0,l.useState)([]),[x,m]=(0,l.useState)(!0),[u,p]=(0,l.useState)("killmail");(0,l.useEffect)(()=>{"unauthenticated"===t?s.push("/"):"authenticated"===t&&e&&((0,i.O5)(e.accessToken),g())},[t,e,s]);let g=async()=>{try{let e=await i.Ay.get("/ingestion/jobs").catch(()=>({data:[]}));h(e.data||[{id:"1",type:"killmail",status:"running",itemsProcessed:1234,itemsTotal:5e3,startedAt:new Date(Date.now()-36e5).toISOString(),lastUpdate:new Date().toISOString()},{id:"2",type:"character",status:"running",itemsProcessed:456,itemsTotal:1e3,startedAt:new Date(Date.now()-72e5).toISOString(),lastUpdate:new Date().toISOString()},{id:"3",type:"corporation",status:"paused",itemsProcessed:89,itemsTotal:200,startedAt:new Date(Date.now()-108e5).toISOString(),lastUpdate:new Date(Date.now()-18e5).toISOString()}])}catch(e){console.error("Failed to fetch jobs:",e)}finally{m(!1)}},j=async e=>{try{await i.Ay.post("/ingestion/start",{type:e}),g()}catch(e){console.error("Failed to start job:",e)}},y=async e=>{try{await i.Ay.post("/ingestion/pause/".concat(e)),g()}catch(e){console.error("Failed to pause job:",e)}},w=async e=>{try{await i.Ay.post("/ingestion/resume/".concat(e)),g()}catch(e){console.error("Failed to resume job:",e)}};return x?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"text-slate-400",children:"Loading ingestion data..."})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Ingestion Management"}),(0,a.jsx)("p",{className:"text-slate-400",children:"Manage data ingestion jobs and monitor progress"})]}),(0,a.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(c,{className:"w-5 h-5 text-blue-400"}),"Start New Ingestion Job"]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("select",{value:u,onChange:e=>p(e.target.value),className:"flex-1 px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"killmail",children:"Killmail Ingestion"}),(0,a.jsx)("option",{value:"character",children:"Character Ingestion"}),(0,a.jsx)("option",{value:"corporation",children:"Corporation Ingestion"})]}),(0,a.jsxs)("button",{onClick:()=>j(u),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,a.jsx)(c,{className:"w-4 h-4"}),"Start Job"]})]})]}),(0,a.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(d.A,{className:"w-5 h-5 text-blue-400"}),"Active Jobs"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[o.map(e=>(0,a.jsx)(b,{job:e,onPause:()=>y(e.id),onResume:()=>w(e.id)},e.id)),0===o.length&&(0,a.jsx)("div",{className:"text-center py-8 text-slate-400",children:"No active ingestion jobs. Start a new job above."})]})]})]})}function b(e){let{job:t,onPause:s,onResume:l}=e,r=t.itemsProcessed/t.itemsTotal*100,n={running:h.A,paused:x.A,stopped:m,error:m}[t.status];return(0,a.jsxs)("div",{className:"bg-slate-700 rounded-lg p-4 border border-slate-600",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("h3",{className:"text-white font-medium capitalize",children:[t.type," Ingestion"]}),(0,a.jsxs)("span",{className:"px-2 py-1 rounded text-xs font-semibold flex items-center gap-1 ".concat({running:"bg-green-500/20 text-green-400",paused:"bg-yellow-500/20 text-yellow-400",stopped:"bg-gray-500/20 text-gray-400",error:"bg-red-500/20 text-red-400"}[t.status]),children:[(0,a.jsx)(n,{className:"w-3 h-3"}),t.status]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:["running"===t.status?(0,a.jsx)("button",{onClick:s,className:"p-2 hover:bg-slate-600 rounded transition-colors",title:"Pause",children:(0,a.jsx)(u,{className:"w-4 h-4 text-slate-300"})}):"paused"===t.status?(0,a.jsx)("button",{onClick:l,className:"p-2 hover:bg-slate-600 rounded transition-colors",title:"Resume",children:(0,a.jsx)(c,{className:"w-4 h-4 text-slate-300"})}):null,(0,a.jsx)("button",{className:"p-2 hover:bg-slate-600 rounded transition-colors",title:"Refresh",children:(0,a.jsx)(p,{className:"w-4 h-4 text-slate-300"})})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm text-slate-400 mb-1",children:[(0,a.jsx)("span",{children:"Progress"}),(0,a.jsxs)("span",{children:[t.itemsProcessed.toLocaleString()," / ",t.itemsTotal.toLocaleString()," (",r.toFixed(1),"%)"]})]}),(0,a.jsx)("div",{className:"w-full bg-slate-600 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(r,"%")}})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Started:"}),(0,a.jsx)("span",{className:"text-white ml-2",children:new Date(t.startedAt).toLocaleString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Last Update:"}),(0,a.jsx)("span",{className:"text-white ml-2",children:new Date(t.lastUpdate).toLocaleString()})]})]}),t.error&&(0,a.jsx)("div",{className:"mt-3 p-3 bg-red-500/10 border border-red-500/50 rounded text-red-400 text-sm",children:t.error})]})}}},e=>{e.O(0,[249,139,991,678,358],()=>e(e.s=55620)),_N_E=e.O()}]);