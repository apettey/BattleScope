(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[337],{5128:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(98868).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},19841:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(98868).A)("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]])},23809:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(98868).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},28721:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(98868).A)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},35717:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var a=s(36362),l=s(39938),i=s(11249),c=s(35865),r=s(60833),d=s(94040),n=s(28721),o=s(5128),h=s(23809),m=s(50977),u=s(19841);function x(){let{data:e,status:t}=(0,i.useSession)(),s=(0,c.useRouter)(),[x,g]=(0,l.useState)([]),[b,v]=(0,l.useState)(null),[j,A]=(0,l.useState)(!0);(0,l.useEffect)(()=>{"unauthenticated"===t?s.push("/"):"authenticated"===t&&e&&((0,r.O5)(e.accessToken),N())},[t,e,s]);let N=async()=>{try{let[e,t]=await Promise.all([r.Ay.get("/health/services").catch(()=>({data:[]})),r.Ay.get("/stats/dashboard").catch(()=>({data:null}))]);g(e.data||[{name:"Ingestion",status:"healthy",uptime:99.9,requests:15234},{name:"Enrichment",status:"healthy",uptime:99.8,requests:12456},{name:"Battle",status:"healthy",uptime:99.7,requests:8901},{name:"Search",status:"healthy",uptime:99.9,requests:5678},{name:"Notification",status:"healthy",uptime:99.6,requests:3456},{name:"BFF",status:"healthy",uptime:99.9,requests:23456}]),v(t.data||{totalBattles:1234,activeBattles:45,totalCharacters:56789,totalKillmails:123456,recentActivity:78})}catch(e){console.error("Failed to fetch dashboard data:",e)}finally{A(!1)}};return j?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"text-slate-400",children:"Loading dashboard..."})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Dashboard"}),(0,a.jsx)("p",{className:"text-slate-400",children:"Welcome back to BattleScope V3"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)(p,{title:"Total Battles",value:(null==b?void 0:b.totalBattles)||0,icon:d.A,color:"blue"}),(0,a.jsx)(p,{title:"Active Battles",value:(null==b?void 0:b.activeBattles)||0,icon:n.A,color:"green"}),(0,a.jsx)(p,{title:"Total Characters",value:(null==b?void 0:b.totalCharacters)||0,icon:o.A,color:"purple"}),(0,a.jsx)(p,{title:"Recent Activity",value:"".concat((null==b?void 0:b.recentActivity)||0,"%"),icon:h.A,color:"orange"})]}),(0,a.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"w-5 h-5 text-blue-400"}),"Service Status"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(e=>(0,a.jsxs)("div",{className:"bg-slate-700 rounded-lg p-4 border border-slate-600",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"text-white font-medium",children:e.name}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("healthy"===e.status?"bg-green-500/20 text-green-400":"unhealthy"===e.status?"bg-red-500/20 text-red-400":"bg-gray-500/20 text-gray-400"),children:e.status})]}),e.uptime&&(0,a.jsxs)("div",{className:"text-slate-400 text-sm",children:["Uptime: ",e.uptime,"%"]}),e.requests&&(0,a.jsxs)("div",{className:"text-slate-400 text-sm",children:["Requests: ",e.requests.toLocaleString()]})]},e.name))})]}),(0,a.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"w-5 h-5 text-blue-400"}),"Recent Activity"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(y,{title:"New battle detected in Delve",time:"2 minutes ago",type:"battle"}),(0,a.jsx)(y,{title:"Killmail processed: Titan loss",time:"5 minutes ago",type:"killmail"}),(0,a.jsx)(y,{title:"Character enrichment completed",time:"8 minutes ago",type:"enrichment"}),(0,a.jsx)(y,{title:"Battle ended: M-OEE8",time:"15 minutes ago",type:"battle"})]})]})]})}function p(e){let{title:t,value:s,icon:l,color:i}=e;return(0,a.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)("div",{className:"p-3 rounded-lg ".concat({blue:"bg-blue-500/20 text-blue-400",green:"bg-green-500/20 text-green-400",purple:"bg-purple-500/20 text-purple-400",orange:"bg-orange-500/20 text-orange-400"}[i]),children:(0,a.jsx)(l,{className:"w-6 h-6"})})}),(0,a.jsx)("h3",{className:"text-slate-400 text-sm font-medium mb-1",children:t}),(0,a.jsx)("p",{className:"text-3xl font-bold text-white",children:s})]})}function y(e){let{title:t,time:s,type:l}=e;return(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-slate-700 rounded-lg",children:[(0,a.jsx)("div",{className:"w-2 h-2 mt-2 rounded-full ".concat({battle:"bg-blue-500",killmail:"bg-red-500",enrichment:"bg-green-500"}[l])}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-white text-sm",children:t}),(0,a.jsx)("p",{className:"text-slate-400 text-xs mt-1",children:s})]})]})}},50977:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(98868).A)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},53386:(e,t,s)=>{Promise.resolve().then(s.bind(s,35717))},60833:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>i,O5:()=>l});let a=s(53396).A.create({baseURL:"http://localhost:30006",headers:{"Content-Type":"application/json"}}),l=e=>{e?a.defaults.headers.common.Authorization="Bearer ".concat(e):delete a.defaults.headers.common.Authorization},i=a},94040:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(98868).A)("Radar",[["path",{d:"M19.07 4.93A10 10 0 0 0 6.99 3.34",key:"z3du51"}],["path",{d:"M4 6h.01",key:"oypzma"}],["path",{d:"M2.29 9.62A10 10 0 1 0 21.31 8.35",key:"qzzz0"}],["path",{d:"M16.24 7.76A6 6 0 1 0 8.23 16.67",key:"1yjesh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M17.99 11.66A6 6 0 0 1 15.77 16.67",key:"1u2y91"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"m13.41 10.59 5.66-5.66",key:"mhq4k0"}]])}},e=>{e.O(0,[249,139,991,678,358],()=>e(e.s=53386)),_N_E=e.O()}]);